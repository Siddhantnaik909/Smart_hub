<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMART HUB | Paint Estimator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/custom.css">
    <style>
        .calc-wrapper {
            max-width: 740px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        #results {
            display: none;
        }

        #results.visible {
            display: block;
            animation: calcFadeUp 0.45s ease;
        }

        @keyframes calcFadeUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body>
    <div class="dashboard-layout" id="dashboard-wrapper">
        <div class="overlay" id="mobile-overlay"></div>
        <div id="sidebar-placeholder"></div>
        <main class="main-content">
            <div id="header-placeholder"></div>
            <div class="page-body">
                <section class="container fade-in">
                    <div class="calc-wrapper">

                        <div class="cat-card">
                            <div class="calculator-header">
                                <h2><i class="fas fa-paint-roller" style="color:var(--primary-color)"></i> Pro Paint
                                    Estimator</h2>
                                <p>Advanced surface area analysis with architectural deductions for doors and windows.
                                </p>
                            </div>
                        </div>

                        <div class="calc-info-box">
                            <h4><i class="fas fa-book-open"></i> How to Calculate</h4>
                            <ol style="padding-left:18px">
                                <li>Measure the <strong>wall height</strong> and the <strong>total room
                                        perimeter</strong> (sum of all wall lengths).</li>
                                <li>Select <strong>surface condition</strong> — textured surfaces absorb more paint.
                                </li>
                                <li>Enter the <strong>number of doors and windows</strong> to deduct from paintable
                                    area.</li>
                                <li>Doors average <strong>21 sq ft</strong>; windows average <strong>15 sq ft</strong>
                                    each.</li>
                            </ol>
                            <div class="calc-formula-box">
                                Gross Area = Wall Height × Perimeter<br>
                                Deductions = (Doors × 21) + (Windows × 15)<br>
                                Net Area = Gross Area − Deductions<br>
                                Gallons = (Net Area × Coats) ÷ Coverage Rate
                            </div>
                            <div style="margin-top:10px;display:grid;grid-template-columns:1fr 1fr;gap:8px">
                                <div
                                    style="background:var(--bg-main);border:1px solid var(--border-color);border-radius:8px;padding:10px;font-size:0.9rem;text-align:center">
                                    <strong style="color:var(--primary-color)">Smooth / Primed</strong><br>~400
                                    ft²/gallon
                                </div>
                                <div
                                    style="background:var(--bg-main);border:1px solid var(--border-color);border-radius:8px;padding:10px;font-size:0.9rem;text-align:center">
                                    <strong style="color:var(--primary-color)">Rough / Unprimed</strong><br>~300
                                    ft²/gallon
                                </div>
                                <div
                                    style="background:var(--bg-main);border:1px solid var(--border-color);border-radius:8px;padding:10px;font-size:0.9rem;text-align:center">
                                    <strong style="color:var(--primary-color)">Textured / Brick</strong><br>~250
                                    ft²/gallon
                                </div>
                                <div
                                    style="background:var(--bg-main);border:1px solid var(--border-color);border-radius:8px;padding:10px;font-size:0.9rem;text-align:center">
                                    <strong style="color:var(--primary-color)">Ceiling (Flat)</strong><br>~350
                                    ft²/gallon
                                </div>
                            </div>
                        </div>

                        <div class="cat-card">
                            <div class="sub-cat-list">
                                <div class="sub-link">
                                    <span>Wall Height (ft)</span>
                                    <input type="number" id="height" class="form-control" placeholder="e.g. 9">
                                </div>
                                <div class="sub-link">
                                    <span>Total Room Perimeter (ft)</span>
                                    <input type="number" id="perimeter" class="form-control"
                                        placeholder="Sum of all wall lengths">
                                </div>
                                <div class="sub-link">
                                    <span>Surface Condition</span>
                                    <select id="porosity" class="form-control">
                                        <option value="400">Smooth / Primed (400 ft²/gal)</option>
                                        <option value="300">Rough / Unprimed (300 ft²/gal)</option>
                                        <option value="250">Textured / Brick (250 ft²/gal)</option>
                                    </select>
                                </div>
                                <div class="sub-link">
                                    <span>Number of Coats</span>
                                    <select id="coats" class="form-control">
                                        <option value="1">1 Coat</option>
                                        <option value="2" selected>2 Coats</option>
                                        <option value="3">3 Coats</option>
                                    </select>
                                </div>
                                <div class="sub-link">
                                    <span>Doors Count</span>
                                    <input type="number" id="doors" class="form-control" value="0" min="0">
                                </div>
                                <div class="sub-link">
                                    <span>Windows Count</span>
                                    <input type="number" id="windows" class="form-control" value="0" min="0">
                                </div>
                                <button id="calcBtn" class="btn-calc"><i class="fas fa-calculator"></i> Analyze
                                    Coverage</button>
                            </div>
                        </div>

                        <div class="cat-card" id="results">
                            <h3 style="margin:0 0 15px;color:var(--primary-color)"><i class="fas fa-chart-bar"></i>
                                Material Requirements</h3>
                            <div id="resultArea"></div>
                            <button id="saveBtn" class="btn-save" style="margin-top:15px"><i class="fas fa-save"></i>
                                Save to History</button>
                        </div>

                        <div class="calc-tip-box">
                            <h4><i class="fas fa-lightbulb"></i> Pro Tips</h4>
                            <ul style="padding-left:18px">
                                <li>Always apply a <strong>primer coat first</strong> on new drywall or after color
                                    changes — reduces total paint needed.</li>
                                <li>Dark-to-light color changes typically require <strong>3+ coats</strong>.</li>
                                <li>Buy a bit <strong>extra (10%)</strong> to store for touch-ups later.</li>
                                <li>Keep leftover paint in an airtight container — it can last <strong>5–10
                                        years</strong> properly stored.</li>
                                <li>Satin and semi-gloss finishes cover less area but are more washable — ideal for
                                    kitchens and bathrooms.</li>
                            </ul>
                        </div>

                    </div>
                </section>
                <div id="footer-placeholder"></div>
            </div>
        </main>
    </div>
    <script>
        window.FRONTEND_ROOT = "/"; window.COMPONENT_ROOT = "/components/";
        let _lastInputs = null, _lastResults = null;

        document.getElementById('calcBtn').addEventListener('click', function () {
            const h = parseFloat(document.getElementById('height').value);
            const p = parseFloat(document.getElementById('perimeter').value);
            const coats = parseInt(document.getElementById('coats').value);
            const coveragePerGal = parseFloat(document.getElementById('porosity').value);
            const doors = parseInt(document.getElementById('doors').value) || 0;
            const windows = parseInt(document.getElementById('windows').value) || 0;
            if (!h || !p) { alert("Please enter height and perimeter."); return; }
            const grossArea = h * p;
            const deductions = (doors * 21) + (windows * 15);
            const netArea = Math.max(0, grossArea - deductions);
            const totalAreaToPaint = netArea * coats;
            const gallonsNeeded = totalAreaToPaint / coveragePerGal;
            const litersNeeded = gallonsNeeded * 3.78541;
            const quarts = Math.ceil(gallonsNeeded * 4);

            _lastInputs = [
                { label: 'Wall Height', val: `${h} ft` },
                { label: 'Perimeter', val: `${p} ft` },
                { label: 'Coats', val: `${coats}` },
                { label: 'Doors / Windows', val: `${doors} / ${windows}` },
            ];
            _lastResults = [
                { label: 'Gross Wall Area', val: `${grossArea.toFixed(2)} ft²` },
                { label: 'Deductions', val: `−${deductions} ft²` },
                { label: 'Net Paintable Area', val: `${netArea.toFixed(2)} ft²` },
                { label: 'Paint Required', val: `${gallonsNeeded.toFixed(2)} gallons`, highlight: true },
                { label: 'Metric', val: `${litersNeeded.toFixed(2)} liters` },
                { label: 'In Quarts', val: `${quarts} quarts` },
            ];
            window.renderResults('resultArea', _lastResults);
            window.showResultCard('results');
        });

        document.getElementById('saveBtn').addEventListener('click', function () {
            if (!_lastResults) { alert('Calculate first!'); return; }
            const ok = window.saveCalcToHistory('Paint Estimator', _lastInputs, _lastResults);
            if (ok) {
                const orig = this.innerHTML;
                this.innerHTML = '<i class="fas fa-check"></i> Saved!';
                this.style.background = '#10b981';
                setTimeout(() => { this.innerHTML = orig; this.style.background = ''; }, 2000);
            }
        });
    </script>
    <script src="/js/component-loader.js"></script>
    <script type="module" src="/js/script.js"></script>
    <script src="/js/calc-utils.js"></script>
    <script src="/js/custom.js"></script>
</body>

</html>